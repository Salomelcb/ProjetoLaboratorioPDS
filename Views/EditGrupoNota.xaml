<Window x:Class="GestaoAvaliacoes.Views.EditGrupoNota"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Editar Notas do Grupo"
        Height="400"
        Width="375"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent">

    <Border CornerRadius="10" BorderBrush="{DynamicResource TertiaryColor}" BorderThickness="2">
        <Border.Background>
            <ImageBrush ImageSource="/Assets/gradientsoft.png" Stretch="UniformToFill"/>
        </Border.Background>

        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="30">
                <TextBlock Text="Lançar Notas para o Grupo" 
                           FontSize="18" 
                           FontWeight="Bold" 
                           Foreground="{DynamicResource QuinaryColor}" 
                           Margin="0,0,0,20" 
                           HorizontalAlignment="Center"/>

                <ItemsControl x:Name="NotasPorTarefaPanel">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Margin="0,0,0,20" HorizontalAlignment="Center">
                                <TextBlock Text="{Binding Titulo}" 
                                           FontWeight="Bold" 
                                           FontSize="14" 
                                           Foreground="{DynamicResource QuinaryColor}" 
                                           Margin="0,0,0,5"
                                           HorizontalAlignment="Center"/>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <TextBox Width="80" PreviewTextInput="NumericOnlyInput"
                                             Text="{Binding NotaTexto, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                             HorizontalAlignment="Center"
                                             VerticalContentAlignment="Center"
                                             TextAlignment="Center"/>

                                    <Button Content="Exceções por aluno"
                                            Width="150"
                                            Margin="10,0,0,0"
                                            Click="AbrirExcecoes_Click"
                                            Tag="{Binding}"
                                            Style="{StaticResource BotoesVerdes}"
                                            FontWeight="SemiBold"/>

                                    <TextBlock Text="⚠"
                                               Foreground="Orange"
                                               FontSize="16"
                                               Margin="5,0,0,0"
                                               VerticalAlignment="Center"/>
                                </StackPanel>
                                <CheckBox Content="Manter exceções" 
                                          IsChecked="{Binding ManterExcecoes}"
                                          Margin="0,5,0,0"/>
                            </StackPanel>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <TextBlock x:Name="txtErro"
                           Foreground="Red"
                           FontSize="10"
                           Margin="0,4,0,10"
                           TextWrapping="Wrap"/>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="Cancelar" Width="100" Margin="0,0,10,0" Click="Cancelar_Click"
                            Style="{StaticResource BotoesVerdes}" FontWeight="SemiBold"/>
                    <Button Content="Confirmar" Width="100" Click="Confirmar_Click"
                            Style="{StaticResource BotoesVerdes}" FontWeight="SemiBold"/>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>
    </Border>
</Window>
